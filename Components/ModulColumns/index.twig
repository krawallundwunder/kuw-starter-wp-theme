<section class="component component-columns-module  text-black py-16 lg:py-24 transition-all duration-300 ease-in-out">
	<div class="container mx-auto px-4 sm:px-6 lg:px-8">
		{% if title or description %}
			<div class="text-center">
				{% if title %}
					<h2 class="text-4xl md:text-5xl lg:text-7xl font-medium leading-none mb-6 sm:mb-10">{{ title }}</h2>
				{% endif %}

				{% if description %}
					<div class="mb-12 lg:mb-16">
						<div class="text-lg md:text-xl lg:text-[22px] font-light leading-tight mb-6 sm:mb-8 text-gray-500">
							{{ description|e('wp_kses_post') }}
						</div>
					</div>
				{% endif %}
			</div>
		{% endif %}

		<div class="grid grid-cols-1 gap-8 md:grid-flow-col md:auto-cols-fr md:grid-cols-{{ columns|length }}">
			{% for column in columns %}
				{% set has_link = column.button and column.button.url %}

				<div class="column js-column-item bg-gray-50 flex flex-col gap-4 md:gap-8 h-full rounded-lg p-1.5 transition-all duration-300 ease-in-out text-{{ options.textAlignment }}">

					<div class="grow">
						{% if column.image %}
							<div class="column-image mb-8">
								<img src="{{ column.image.src }}" alt="{{ column.image.alt }}" loading="lazy" class="object-cover object-center max-h-60 {{ options.isImageRounded ? ' rounded-full aspect-square mx-auto' : 'w-full h-full rounded-t-lg' }} {% if has_link %}transition-opacity duration-300 ease-in-out hover:opacity-80{% endif %}">
							</div>
						{% endif %}

						<div class="mx-4 mb-4">
							{% if column.tag %}
								<div class="column-tag mb-1">
									<span class="inline-block text-sm font-medium text-blue-500 uppercase tracking-wide">
										{{ column.tag }}
									</span>
								</div>
							{% endif %}

							{% if column.subtitle %}
								<div class="column-subtitle-container mb-2.5">
									<h3 class="js-column-subtitle column-subtitle text-3xl font-medium w-full text-primary">
										{{ column.subtitle }}
									</h3>
								</div>
							{% endif %}

							{% if column.description %}
								<div class="column-description text-gray-500 text-lg md:text-xl lg:text-[22px] leading-tight font-light">
									{{ column.description|e('wp_kses_post') }}
								</div>
							{% endif %}
						</div>
					</div>

					{% if column.button and column.button.url %}
						<div class="column-button mt-auto mx-4 mb-6">
							<a href="{{ column.button.url }}" class="bg-blue-600 no-underline! py-3 px-3 rounded-lg text-white hover:bg-blue-300 hover:text-white btn-base" target="{{ column.button.target }}" {{ column.button.target == '_blank' ? 'rel="noopener noreferrer"' }}>
								{{ column.button.title ? column.button.title : __('Book a Meeting', 'flynt') }}
							</a>
						</div>
					{% endif %}
				</div>
			{% endfor %}
		</div>
	</div>
</section>
<style>
	.column-subtitle-container {
		min-height: var(--row-subtitle-height, auto);
		display: flex;
		align-items: flex-end;
	}
</style>

<script>
	(function () {
function equalizeColumnHeights() {
const components = document.querySelectorAll('.component-columns-module');

if (! components.length) {
return;
}

components.forEach(component => {
const columnItems = component.querySelectorAll('.js-column-item');

if (! columnItems.length) {
return;
}

let maxHeight = 0;

columnItems.forEach(item => {
item.style.removeProperty('--row-subtitle-height');
const subtitle = item.querySelector('.js-column-subtitle');
if (subtitle) {
subtitle.parentElement.style.minHeight = '0px';
}
});

requestAnimationFrame(() => {
columnItems.forEach(item => {
const subtitle = item.querySelector('.js-column-subtitle');
if (subtitle) {
const subtitleHeight = subtitle.getBoundingClientRect().height;
if (subtitleHeight > maxHeight) {
maxHeight = subtitleHeight;
}
subtitle.parentElement.style.removeProperty('min-height');
}
});

if (maxHeight > 0) {
columnItems.forEach(item => {
item.style.setProperty('--row-subtitle-height', `${maxHeight}px`);
});
}
});
});
}

document.addEventListener('DOMContentLoaded', equalizeColumnHeights);

let resizeTimeout;
window.addEventListener('resize', () => {
clearTimeout(resizeTimeout);
resizeTimeout = setTimeout(equalizeColumnHeights, 150);
});
})();
</script>
