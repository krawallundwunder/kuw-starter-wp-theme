<section class="component component-columns-module  text-black py-16 lg:py-24 transition-all duration-300 ease-in-out">
	<div class="container mx-auto px-4 sm:px-6 lg:px-8">
		{% if tag or title or description %}
			<div class="">
				{% include "templates/_partials/headings.twig" with {
            tag: tag,
            title: title,
            description: description,
            buttons: buttons,
            textAlign: textAlignment ? 'text-' ~ textAlignment : null
          } %}
			</div>
		{% endif %}


		<div class="grid grid-cols-1 gap-8 md:grid-flow-col md:auto-cols-fr md:grid-cols-{{ columns|length }}">
			{% for column in columns %}
				{% set has_link = column.button and column.button.url %}

				<div class="column js-column-item bg-gray-50 flex flex-col gap-4 md:gap-8 h-full rounded-lg p-1.5 transition-all duration-300 ease-in-out text-{{ options.textAlignment }}">

					<div class="grow">
						{% if column.image %}
							<div class="column-image mb-8">
								<img src="{{ column.image.src }}" alt="{{ column.image.alt }}" loading="lazy" class="object-cover object-center max-h-60 {{ options.isImageRounded ? ' rounded-full aspect-square mx-auto' : 'w-full h-full rounded-t-lg' }}">
							</div>
						{% endif %}

						<div class="mx-4 mb-4">
							{% if column.tag %}
								<div class="column-tag mb-1">
									<span class="inline-block text-xs font-medium text-black/60 uppercase tracking-wide">
										{{ column.tag }}
									</span>
								</div>
							{% endif %}

							{% if column.subtitle %}
								<div class="column-subtitle-container mb-2.5">
									<h3 class="js-column-subtitle column-subtitle text-2xl font-medium w-full text-black">
										{{ column.subtitle }}
									</h3>
								</div>
							{% endif %}

							{% if column.description %}
								<div class="column-description text-black/90 text-lg leading-tight font-light">
									{{ column.description|e('wp_kses_post') }}
								</div>
							{% endif %}
						</div>
					</div>

					{% if column.cardButton %}
						{% include "templates/_partials/button.twig" with {
            text: column.cardButton.title,
            link: column.cardButton.url,
            target: column.cardButton.target,
            variant: 'secondary',
          } %}
					{% endif %}

				</div>
			{% endfor %}
		</div>
	</div>
</section>
<style>
	.column-subtitle-container {
		min-height: var(--row-subtitle-height, auto);
		display: flex;
		align-items: flex-end;
	}
</style>

<script>
	(function () {
function equalizeColumnHeights() {
const components = document.querySelectorAll('.component-columns-module');

if (! components.length) {
return;
}

components.forEach(component => {
const columnItems = component.querySelectorAll('.js-column-item');

if (! columnItems.length) {
return;
}

let maxHeight = 0;

columnItems.forEach(item => {
item.style.removeProperty('--row-subtitle-height');
const subtitle = item.querySelector('.js-column-subtitle');
if (subtitle) {
subtitle.parentElement.style.minHeight = '0px';
}
});

requestAnimationFrame(() => {
columnItems.forEach(item => {
const subtitle = item.querySelector('.js-column-subtitle');
if (subtitle) {
const subtitleHeight = subtitle.getBoundingClientRect().height;
if (subtitleHeight > maxHeight) {
maxHeight = subtitleHeight;
}
subtitle.parentElement.style.removeProperty('min-height');
}
});

if (maxHeight > 0) {
columnItems.forEach(item => {
item.style.setProperty('--row-subtitle-height', `${maxHeight}px`);
});
}
});
});
}

document.addEventListener('DOMContentLoaded', equalizeColumnHeights);

let resizeTimeout;
window.addEventListener('resize', () => {
clearTimeout(resizeTimeout);
resizeTimeout = setTimeout(equalizeColumnHeights, 150);
});
})();
</script>
