<flynt-component name="ModulCardsRepeater">
	<section class="cards-repeater py-16 bg-gray-50">
		<div
			class="container mx-auto px-4 max-w-7xl">

			{# Header Section #}
			<div>
				{% include "templates/_partials/headings.twig" with {
          tag: tag,
          title: title,
          description: description,
          buttons: ctaButtons
        } %}
			</div>

			{# Cards Grid #}
			{% if cards %}
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
					{% for card in cards %}
						{% set hasContent = card.title or card.description or card.button %}
						{% set hasImage = card.image %}
						{% set hasLink = card.button %}

						{# Case 1: Nur Bild - nimmt komplette Card ein #}
						{% if hasImage and not hasContent %}
							<div class="group overflow-hidden aspect-video rounded-xl shadow-md {% if hasLink %}hover:shadow-xl transition-shadow duration-300{% endif %}">
								{% if hasLink %}
									<a href="{{ card.button.url }}" {% if card.button.target %} target="{{ card.button.target }}" {% endif %} class="block h-full">
										<div class="overflow-hidden h-full">
											<img src="{{ Image(card.image).src('large') }}" alt="{{ card.button.title }}" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-300" loading="lazy"/>
										</div>
									</a>
								{% else %}
									<div class="overflow-hidden h-full">
										<img src="{{ Image(card.image).src('large') }}" alt="" class="h-full w-full object-cover" loading="lazy"/>
									</div>
								{% endif %}
							</div>

							{# Case 2: Bild + Content #}
						{% elseif hasImage and hasContent %}
							<div class="bg-white rounded-xl shadow-md {% if hasLink %}hover:shadow-xl transition-shadow duration-300{% endif %} overflow-hidden {% if hasLink %}group{% endif %} flex flex-col">
								<div class="overflow-hidden bg-gray-200 aspect-video shrink-0">
									<img src="{{ Image(card.image).src('large') }}" alt="{{ card.title }}" class="h-full w-full object-cover {% if hasLink %}group-hover:scale-105 transition-transform duration-300{% endif %}" loading="lazy"/>
								</div>
								<div class="p-6 grow flex flex-col">
									{% if card.title %}
										<h3 class="text-xl font-bold text-gray-900 mb-3">
											{{ card.title }}
										</h3>
									{% endif %}

									{% if card.description %}
										<p class="text-gray-600 mb-4 line-clamp-4 grow">
											{{ card.description }}
										</p>
									{% endif %}

									{% if hasLink %}
										<div>
											{% include "templates/_partials/button.twig" with {
                        buttons: ctaButtons
                      } %}
										</div>
									{% endif %}
								</div>
							</div>

							{# Case 3: Nur Content ohne Bild #}
						{% elseif hasContent %}
							<div class="bg-white rounded-xl shadow-md {% if hasLink %}hover:shadow-xl transition-shadow duration-300 group{% endif %} p-6 flex flex-col h-full">
								{% if card.title %}
									<h3 class="text-xl font-bold text-gray-900 mb-3">
										{{ card.title }}
									</h3>
								{% endif %}

								{% if card.description %}
									<p class="text-gray-600 mb-4 grow">
										{{ card.description }}
									</p>
								{% endif %}

								{% if hasLink %}
									<div>
										{% include "templates/_partials/button.twig" with {
                        buttons: ctaButtons
                      } %}
									</div>
								{% endif %}
							</div>
						{% endif %}

					{% endfor %}
				</div>
			{% endif %}

		</div>
	</section>
</flynt-component>
